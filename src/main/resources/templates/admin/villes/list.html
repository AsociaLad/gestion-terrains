<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{admin/layout}">
<head>
    <title>Gestion des Villes</title>
</head>
<body>
<div layout:fragment="content">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>Liste des Villes</h2>
        <a th:href="@{/admin/villes/new}" class="btn btn-primary">
            <i class="bi bi-plus-circle me-2"></i>Nouvelle Ville
        </a>
    </div>

    <div class="alert alert-success alert-dismissible fade show" role="alert" th:if="${success}">
        <i class="bi bi-check-circle-fill me-2"></i>
        <span th:text="${success}"></span>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>

    <div class="alert alert-danger alert-dismissible fade show" role="alert" th:if="${error}">
        <i class="bi bi-exclamation-triangle-fill me-2"></i>
        <span th:text="${error}"></span>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>

    <div class="card shadow-sm">
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nom</th>
                            <th>Code Postal</th>
                            <th>Région</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:if="${#lists.isEmpty(villes)}">
                            <td colspan="5" class="text-center">Aucune ville trouvée</td>
                        </tr>
                        <tr th:each="ville : ${villes}">
                            <td th:text="${ville.id}">1</td>
                            <td th:text="${ville.nom}">Paris</td>
                            <td th:text="${ville.codePostal}">75000</td>
                            <td th:text="${ville.region}">Île-de-France</td>
                            <td>
                                <div class="btn-group btn-group-sm">
                                    <a th:href="@{/admin/villes/{id}/edit(id=${ville.id})}" class="btn btn-primary">
                                        <i class="bi bi-pencil"></i>
                                    </a>
                                    <a th:href="@{/admin/villes/{id}/delete(id=${ville.id})}" 
                                       class="btn btn-danger" 
                                       onclick="return confirm('Êtes-vous sûr de vouloir supprimer cette ville?')">
                                        <i class="bi bi-trash"></i>
                                    </a>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
</body>
</html>ù